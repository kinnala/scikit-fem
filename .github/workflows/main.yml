name: tests
on: [push, pull_request]

jobs:
  run_tests_37_nix:
    name: Python 3.7 (Nix)
    uses: ./.github/workflows/nix.yml
    with:
      cache_key: "py37"
      flake_artifact: "#devShells.x86_64-linux.py37"
  run_tests_38_nix:
    name: Python 3.8 (Nix)
    uses: ./.github/workflows/nix.yml
    with:
      cache_key: "py38"
      flake_artifact: "#devShells.x86_64-linux.py38"
  run_tests_39_nix:
    name: Python 3.9 (Nix)
    uses: ./.github/workflows/nix.yml
    with:
      cache_key: "py39"
      flake_artifact: "#devShells.x86_64-linux.py39"
  run_tests_310_nix:
    name: Python 3.10 (Nix)
    uses: ./.github/workflows/nix.yml
    with:
      cache_key: "py310"
      flake_artifact: "#devShells.x86_64-linux.default"
