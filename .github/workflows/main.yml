name: tests
on:
  pull_request:
  push:
    branches: master

jobs:
  run_tests_38_nix:
    name: Python 3.8 (Nix)
    uses: ./.github/workflows/nix.yml
    with:
      cache_key: "py38"
      flake_artifact: "#devShells.x86_64-linux.py38"
  run_tests_39_nix:
    name: Python 3.9 (Nix)
    uses: ./.github/workflows/nix.yml
    with:
      cache_key: "py39"
      flake_artifact: "#devShells.x86_64-linux.py39"
  run_tests_310_nix:
    name: Python 3.10 (Nix)
    uses: ./.github/workflows/nix.yml
    with:
      cache_key: "py310"
      flake_artifact: "#devShells.x86_64-linux.default"
  run_tests_311_nix:
    name: Python 3.11 (Nix)
    uses: ./.github/workflows/nix.yml
    with:
      cache_key: "py311"
      flake_artifact: "#devShells.x86_64-linux.py311"
